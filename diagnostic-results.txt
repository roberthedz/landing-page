ğŸ” DIAGNÃ“STICO EXHAUSTIVO DE MONGODB
=====================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 1: Leer horarios para HOY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Fecha: 09/30/2025
{"success":false,"error":"Error interno del servidor al obtener horarios ocupados","details":"Operation `bookedslots.find()` buffering timed out after 10000ms","bookedSlots":[],"slotsByDate":{}}
HTTP: 500 | Tiempo: 10.016705s

Resultado:
âŒ FALLO - "error":"Error interno del servidor al obtener horarios ocupados"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 2: Leer horarios para fecha futura
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Fecha: 12/01/2025
{"success":false,"error":"Error interno del servidor al obtener horarios ocupados","details":"Operation `bookedslots.find()` buffering timed out after 10000ms","bookedSlots":[],"slotsByDate":{}}
HTTP: 500 | Tiempo: 10.005487s

Resultado:
âŒ FALLO

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 3: Leer horarios en LOTE (batch)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Fechas: 10/01/2025,10/02/2025,10/03/2025
{"success":false,"error":"Error interno del servidor al obtener horarios en lote","details":"Operation `bookedslots.find()` buffering timed out after 10000ms","bookedSlots":{}}
HTTP: 500 | Tiempo: 10.004523s

Resultado:
âŒ FALLO - Consulta batch fallÃ³

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 4: Estado detallado del sistema
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{"success":false,"error":"Error al verificar el estado del sistema","details":"Operation `bookings.countDocuments()` buffering timed out after 10000ms"}
HTTP: 500 | Tiempo: 10.006081s

Analizando respuesta del sistema...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 5: Crear reserva de prueba
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ID: diagnostic-test-1759234593
{"success":true,"bookingId":"diagnostic-test-1759234593","message":"Solicitud de reserva enviada - Emails notificados","status":"pending","emailsSent":true,"bookingSaved":false,"note":"Emails enviados correctamente. MongoDB no disponible temporalmente."}
HTTP: 201 | Tiempo: 31.495641s

Analizando resultado de creaciÃ³n...
âœ… Reserva procesada
  âœ… Emails enviados
  âŒ NO guardado en MongoDB

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 6: Verificar persistencia
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Esperando 2 segundos...
{"success":false,"error":"Error interno del servidor al obtener horarios ocupados","details":"Operation `bookedslots.find()` buffering timed out after 10000ms","bookedSlots":[],"slotsByDate":{}}
HTTP: 500 | Tiempo: 10.003387s

âŒ La reserva NO apareciÃ³ en la consulta

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TEST 7: Health check detallado
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{"status":"error","mongodb":"disconnected","error":"Operation `bookings.countDocuments()` buffering timed out after 10000ms"}
HTTP: 500 | Tiempo: 10.003589s

âŒ MongoDB reporta: DESCONECTADO

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š RESUMEN DEL DIAGNÃ“STICO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Resultados por test:
  Test 1 (Leer HOY):      âŒ FAIL
  Test 2 (Leer futuro):   âŒ FAIL
  Test 3 (Leer batch):    âŒ FAIL
  Test 4 (System status): âŒ FAIL
  Test 5 (Crear):         âœ… PASS
  Test 6 (Persistencia):  âŒ FAIL
  Test 7 (Health):        âœ… PASS

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Score: 2/7 tests pasaron
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ MongoDB estÃ¡ FALLANDO (mayorÃ­a de tests fallaron)

ğŸ“‹ Archivos de diagnÃ³stico guardados en /tmp/mongodb-test*.txt
ğŸ” Revisa los logs del servidor: tail -f server-diagnostic.log
